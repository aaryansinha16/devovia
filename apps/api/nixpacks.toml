[phases.setup]
aptPkgs = ["nodejs"]

[phases.install]
cmds = [
  "# Make sure we're in the API directory",
  "echo 'Current directory:' && pwd",
  
  "# Install packages using npm instead of pnpm",
  "npm install",
  
  "# Generate Prisma client in the shared database package",
  "cd ../../packages/database && npm run db:generate && npm run build && cd ../../apps/api",
  
  "# Build the API",
  "npm run build"
]

[start]
cmd = "node dist/index.js"
