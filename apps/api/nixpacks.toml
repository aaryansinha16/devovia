[phases.setup]
aptPkgs = ["nodejs", "git"]

[phases.install]
cmds = [
  "# Display environment for debugging",
  "echo 'Current directory:' && pwd && ls -la",
  
  "# Install dependencies using NPM as a fallback",
  "npm install --legacy-peer-deps",
  
  "# Generate Prisma client in database package first",
  "cd packages/database && npm run build && cd ../../",
  
  "# Then build the API",
  "cd apps/api && npm run build"
]

[start]
cmd = "node dist/index.js"
